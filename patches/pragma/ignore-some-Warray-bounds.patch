From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
Date: Wed, 18 Mar 2015 16:45:09 +0800
Subject: [PATCH] {PRAGMA} ignore some -Warray-bounds

---
 drivers/isdn/hardware/eicon/message.c  | 4 ++++
 drivers/isdn/hardware/eicon/platform.h | 4 ++++
 net/sunrpc/xprtrdma/svc_rdma_marshal.c | 3 +++
 3 files changed, 11 insertions(+)

diff --git a/drivers/isdn/hardware/eicon/message.c b/drivers/isdn/hardware/eicon/message.c
index d7c286656a25..a09617ee0900 100644
--- a/drivers/isdn/hardware/eicon/message.c
+++ b/drivers/isdn/hardware/eicon/message.c
@@ -11303,9 +11303,13 @@ static void mixer_notify_update(PLCI *plci, byte others)
 				((CAPI_MSG *) msg)->header.plci = notify_plci->Id;
 				((CAPI_MSG *) msg)->header.ncci = 0;
 				((CAPI_MSG *) msg)->info.facility_req.Selector = SELECTOR_LINE_INTERCONNECT;
+/* _FAC_REQP.structs is a variable-length array */
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Warray-bounds"
 				((CAPI_MSG *) msg)->info.facility_req.structs[0] = 3;
 				PUT_WORD(&(((CAPI_MSG *) msg)->info.facility_req.structs[1]), LI_REQ_SILENT_UPDATE);
 				((CAPI_MSG *) msg)->info.facility_req.structs[3] = 0;
+#pragma GCC diagnostic pop
 				w = api_put(notify_plci->appl, (CAPI_MSG *) msg);
 				if (w != _QUEUE_FULL)
 				{
diff --git a/drivers/isdn/hardware/eicon/platform.h b/drivers/isdn/hardware/eicon/platform.h
index b2edb7590dda..f6eaa38c71b9 100644
--- a/drivers/isdn/hardware/eicon/platform.h
+++ b/drivers/isdn/hardware/eicon/platform.h
@@ -330,7 +330,11 @@ static inline __u32 GET_DWORD(void *addr)
 }
 static inline void PUT_WORD(void *addr, __u16 v)
 {
+/* For mixer_notify_update() function */
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Warray-bounds"
 	*(__le16 *)addr = cpu_to_le16(v);
+#pragma GCC diagnostic pop
 }
 static inline void PUT_DWORD(void *addr, __u32 v)
 {
diff --git a/net/sunrpc/xprtrdma/svc_rdma_marshal.c b/net/sunrpc/xprtrdma/svc_rdma_marshal.c
index e2fca7617242..ef5edb4f06d3 100644
--- a/net/sunrpc/xprtrdma/svc_rdma_marshal.c
+++ b/net/sunrpc/xprtrdma/svc_rdma_marshal.c
@@ -173,7 +173,10 @@ int svc_rdma_xdr_decode_req(struct rpcrdma_msg **rdma_req,
 		rmsgp->rm_body.rm_padded.rm_thresh =
 			be32_to_cpu(rmsgp->rm_body.rm_padded.rm_thresh);
 
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Warray-bounds"
 		va = &rmsgp->rm_body.rm_padded.rm_pempty[4];
+#pragma GCC diagnostic pop
 		rqstp->rq_arg.head[0].iov_base = va;
 		hdrlen = (u32)((unsigned long)va - (unsigned long)rmsgp);
 		rqstp->rq_arg.head[0].iov_len -= hdrlen;
-- 
