From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
Date: Thu, 3 Sep 2015 11:00:16 +0200
Subject: [PATCH] {PRAGMA} ignore -Wlogical-op

---
 drivers/media/dvb-frontends/stb0899_priv.h | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

diff --git a/drivers/media/dvb-frontends/stb0899_priv.h b/drivers/media/dvb-frontends/stb0899_priv.h
index c354ffd8adee..4be1a89f3dd6 100644
--- a/drivers/media/dvb-frontends/stb0899_priv.h
+++ b/drivers/media/dvb-frontends/stb0899_priv.h
@@ -35,8 +35,21 @@
 	}										\
 } while(0)
 
-#define INRANGE(val, x, y)			(((x <= val) && (val <= y)) ||		\
-						 ((y <= val) && (val <= x)) ? 1 : 0)
+/* Ignore -Wlogical-op because when x < y, the second test is always false */
+#ifndef __clang__
+#define INRANGE(val, x, y)			({ \
+_Pragma("GCC diagnostic push") \
+_Pragma("GCC diagnostic ignored \"-Wlogical-op\"") \
+						(((x <= val) && (val <= y)) ||		\
+						 ((y <= val) && (val <= x)) ? 1 : 0); \
+_Pragma("GCC diagnostic pop") \
+						})
+#else
+#define INRANGE(val, x, y)			({ \
+						(((x <= val) && (val <= y)) ||		\
+						 ((y <= val) && (val <= x)) ? 1 : 0); \
+						})
+#endif
 
 #define BYTE0					0
 #define BYTE1					8
-- 
