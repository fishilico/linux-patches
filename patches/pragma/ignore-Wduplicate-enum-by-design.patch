From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
Date: Wed, 17 Jun 2015 15:40:10 +0800
Subject: [PATCH] {PRAGMA} ignore -Wduplicate-enum by design

---
 arch/x86/include/asm/fixmap.h                              |  7 +++++++
 drivers/gpu/drm/amd/display/dc/dc_hw_types.h               |  7 +++++++
 drivers/gpu/drm/amd/display/dc/dc_types.h                  |  7 +++++++
 drivers/gpu/drm/amd/display/dc/dm_services_types.h         |  7 +++++++
 drivers/gpu/drm/i915/i915_reg.h                            |  7 +++++++
 drivers/media/dvb-frontends/helene.c                       |  7 +++++++
 drivers/media/dvb-frontends/mxl5xx_defs.h                  | 14 ++++++++++++++
 drivers/media/dvb-frontends/tda1002x.h                     |  7 +++++++
 drivers/media/usb/cx231xx/cx231xx.h                        |  7 +++++++
 drivers/net/wireless/ath/ath10k/htt.h                      |  7 +++++++
 drivers/net/wireless/ath/carl9170/hw.h                     |  7 +++++++
 .../net/wireless/realtek/rtlwifi/rtl8723com/fw_common.h    |  9 +++++++++
 drivers/net/wireless/realtek/rtlwifi/rtl8821ae/fw.h        |  7 +++++++
 drivers/staging/comedi/comedi.h                            |  7 +++++++
 include/linux/mfd/max77686-private.h                       |  7 +++++++
 include/uapi/linux/netfilter/nf_conntrack_common.h         | 10 ++++++++++
 include/uapi/linux/nl80211.h                               |  7 +++++++
 sound/pci/pcxhr/pcxhr.h                                    |  8 ++++++++
 18 files changed, 139 insertions(+)

diff --git a/arch/x86/include/asm/fixmap.h b/arch/x86/include/asm/fixmap.h
index b0c505fe9a95..e3379969bc8d 100644
--- a/arch/x86/include/asm/fixmap.h
+++ b/arch/x86/include/asm/fixmap.h
@@ -110,6 +110,10 @@ enum fixed_addresses {
 	FIX_APEI_GHES_NMI,
 #endif
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 	__end_of_permanent_fixed_addresses,
 
 	/*
@@ -129,6 +133,9 @@ enum fixed_addresses {
 	 ? __end_of_permanent_fixed_addresses + TOTAL_FIX_BTMAPS -
 	   (__end_of_permanent_fixed_addresses & (TOTAL_FIX_BTMAPS - 1))
 	 : __end_of_permanent_fixed_addresses,
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 	FIX_BTMAP_BEGIN = FIX_BTMAP_END + TOTAL_FIX_BTMAPS - 1,
 #ifdef CONFIG_X86_32
 	FIX_WP_TEST,
diff --git a/drivers/gpu/drm/amd/display/dc/dc_hw_types.h b/drivers/gpu/drm/amd/display/dc/dc_hw_types.h
index 1a9f57fb0838..f1d1259648a0 100644
--- a/drivers/gpu/drm/amd/display/dc/dc_hw_types.h
+++ b/drivers/gpu/drm/amd/display/dc/dc_hw_types.h
@@ -207,6 +207,10 @@ enum surface_pixel_format {
 
 
 /* Pixel format */
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum pixel_format {
 	/*graph*/
 	PIXEL_FORMAT_UNINITIALIZED,
@@ -228,6 +232,9 @@ enum pixel_format {
 	PIXEL_FORMAT_VIDEO_END = PIXEL_FORMAT_420BPP10,
 	PIXEL_FORMAT_UNKNOWN
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 enum tile_split_values {
 	DC_DISPLAY_MICRO_TILING = 0x0,
diff --git a/drivers/gpu/drm/amd/display/dc/dc_types.h b/drivers/gpu/drm/amd/display/dc/dc_types.h
index a8698e399111..5456cc48aca7 100644
--- a/drivers/gpu/drm/amd/display/dc/dc_types.h
+++ b/drivers/gpu/drm/amd/display/dc/dc_types.h
@@ -457,6 +457,10 @@ struct audio_info_flags {
 	};
 };
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum audio_format_code {
 	AUDIO_FORMAT_CODE_FIRST = 1,
 	AUDIO_FORMAT_CODE_LINEARPCM = AUDIO_FORMAT_CODE_FIRST,
@@ -481,6 +485,9 @@ enum audio_format_code {
 	AUDIO_FORMAT_CODE_COUNT =
 		AUDIO_FORMAT_CODE_LAST - AUDIO_FORMAT_CODE_FIRST
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 struct audio_mode {
 	 /* ucData[0] [6:3] */
diff --git a/drivers/gpu/drm/amd/display/dc/dm_services_types.h b/drivers/gpu/drm/amd/display/dc/dm_services_types.h
index fa26cf488b3c..34b97282bbb5 100644
--- a/drivers/gpu/drm/amd/display/dc/dm_services_types.h
+++ b/drivers/gpu/drm/amd/display/dc/dm_services_types.h
@@ -36,6 +36,10 @@ struct dm_pp_clock_range {
 	int max_khz;
 };
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum dm_pp_clocks_state {
 	DM_PP_CLOCKS_STATE_INVALID,
 	DM_PP_CLOCKS_STATE_ULTRA_LOW,
@@ -57,6 +61,9 @@ enum dm_pp_clocks_state {
 
 	DM_PP_CLOCKS_MAX_STATES
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 struct dm_pp_gpu_clock_range {
 	enum dm_pp_clocks_state clock_state;
diff --git a/drivers/gpu/drm/i915/i915_reg.h b/drivers/gpu/drm/i915/i915_reg.h
index 3866c49bc390..4ce586a10dc7 100644
--- a/drivers/gpu/drm/i915/i915_reg.h
+++ b/drivers/gpu/drm/i915/i915_reg.h
@@ -1226,6 +1226,10 @@ static inline bool i915_mmio_reg_valid(i915_reg_t reg)
  * the set of IDs on a given platform must be unique and except for custom
  * power wells their value must stay fixed.
  */
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum i915_power_well_id {
 	/*
 	 * I830
@@ -1294,6 +1298,9 @@ enum i915_power_well_id {
 	 */
 	I915_DISP_PW_ALWAYS_ON = 20,
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 #define PUNIT_REG_PWRGT_CTRL			0x60
 #define PUNIT_REG_PWRGT_STATUS			0x61
diff --git a/drivers/media/dvb-frontends/helene.c b/drivers/media/dvb-frontends/helene.c
index 4bf5a551ba40..ca78206e5fde 100644
--- a/drivers/media/dvb-frontends/helene.c
+++ b/drivers/media/dvb-frontends/helene.c
@@ -56,6 +56,10 @@ struct helene_priv {
 #define HELENE_BW_8		0x02
 #define HELENE_BW_1_7		0x03
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum helene_tv_system_t {
 	SONY_HELENE_TV_SYSTEM_UNKNOWN,
 	/* Terrestrial Analog */
@@ -137,6 +141,9 @@ enum helene_tv_system_t {
 	SONY_HELENE_STV_MAX = SONY_HELENE_STV_DVBS2
 	/**< Maximum satellite system */
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 struct helene_terr_adjust_param_t {
 	/* < Addr:0x69 Bit[6:4] : RFVGA gain.
diff --git a/drivers/media/dvb-frontends/mxl5xx_defs.h b/drivers/media/dvb-frontends/mxl5xx_defs.h
index fd9e61e0188f..fe0f08733f70 100644
--- a/drivers/media/dvb-frontends/mxl5xx_defs.h
+++ b/drivers/media/dvb-frontends/mxl5xx_defs.h
@@ -513,6 +513,10 @@ enum MXL_HYDRA_PID_FILTER_BANK_E {
 	MXL_HYDRA_PID_BANK_B,
 };
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum MXL_HYDRA_MPEG_DATA_FMT_E {
 	MXL_HYDRA_MPEG_SERIAL_MSB_1ST = 0,
 	MXL_HYDRA_MPEG_SERIAL_LSB_1ST,
@@ -520,6 +524,9 @@ enum MXL_HYDRA_MPEG_DATA_FMT_E {
 	MXL_HYDRA_MPEG_SYNC_WIDTH_BIT = 0,
 	MXL_HYDRA_MPEG_SYNC_WIDTH_BYTE
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 enum MXL_HYDRA_MPEG_MODE_E {
 	MXL_HYDRA_MPEG_MODE_SERIAL_4_WIRE = 0, /* MPEG 4 Wire serial mode */
@@ -533,6 +540,10 @@ enum MXL_HYDRA_MPEG_CLK_TYPE_E {
 	MXL_HYDRA_MPEG_CLK_GAPPED,         /* Gapped (gated) MPEG clock */
 };
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum MXL_HYDRA_MPEG_CLK_FMT_E {
 	MXL_HYDRA_MPEG_ACTIVE_LOW = 0,
 	MXL_HYDRA_MPEG_ACTIVE_HIGH,
@@ -543,6 +554,9 @@ enum MXL_HYDRA_MPEG_CLK_FMT_E {
 	MXL_HYDRA_MPEG_CLK_IN_PHASE = 0,
 	MXL_HYDRA_MPEG_CLK_INVERTED,
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 enum MXL_HYDRA_MPEG_CLK_PHASE_E {
 	MXL_HYDRA_MPEG_CLK_PHASE_SHIFT_0_DEG = 0,
diff --git a/drivers/media/dvb-frontends/tda1002x.h b/drivers/media/dvb-frontends/tda1002x.h
index 0d334613de1b..2f8fde5dd2a4 100644
--- a/drivers/media/dvb-frontends/tda1002x.h
+++ b/drivers/media/dvb-frontends/tda1002x.h
@@ -32,12 +32,19 @@ struct tda1002x_config {
 	u8 invert;
 };
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum tda10023_output_mode {
 	TDA10023_OUTPUT_MODE_PARALLEL_A = 0xe0,
 	TDA10023_OUTPUT_MODE_PARALLEL_B = 0xa1,
 	TDA10023_OUTPUT_MODE_PARALLEL_C = 0xa0,
 	TDA10023_OUTPUT_MODE_SERIAL, /* TODO: not implemented */
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 struct tda10023_config {
 	/* the demodulator's i2c address */
diff --git a/drivers/media/usb/cx231xx/cx231xx.h b/drivers/media/usb/cx231xx/cx231xx.h
index 72d5937a087e..7dd372c22235 100644
--- a/drivers/media/usb/cx231xx/cx231xx.h
+++ b/drivers/media/usb/cx231xx/cx231xx.h
@@ -285,6 +285,10 @@ enum cx231xx_itype {
 	CX231XX_VMUX_DVB,
 };
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum cx231xx_v_input {
 	CX231XX_VIN_1_1 = 0x1,
 	CX231XX_VIN_2_1,
@@ -297,6 +301,9 @@ enum cx231xx_v_input {
 	CX231XX_VIN_2_3,
 	CX231XX_VIN_3_3,
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 /* cx231xx has two audio inputs: tuner and line in */
 enum cx231xx_amux {
diff --git a/drivers/net/wireless/ath/ath10k/htt.h b/drivers/net/wireless/ath/ath10k/htt.h
index 6305308422c4..2d63dab6797c 100644
--- a/drivers/net/wireless/ath/ath10k/htt.h
+++ b/drivers/net/wireless/ath/ath10k/htt.h
@@ -527,6 +527,10 @@ struct htt_rx_indication_hdr {
 #define HTT_RX_INDICATION_INFO2_SERVICE_MASK    0xFF000000
 #define HTT_RX_INDICATION_INFO2_SERVICE_LSB     24
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum htt_rx_legacy_rate {
 	HTT_RX_OFDM_48 = 0,
 	HTT_RX_OFDM_24 = 1,
@@ -547,6 +551,9 @@ enum htt_rx_legacy_rate {
 	HTT_RX_CCK_5_5_SP,
 	HTT_RX_CCK_2_SP
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 enum htt_rx_legacy_rate_type {
 	HTT_RX_LEGACY_RATE_OFDM = 0,
diff --git a/drivers/net/wireless/ath/carl9170/hw.h b/drivers/net/wireless/ath/carl9170/hw.h
index 08e0ae9c5836..0a8e908478eb 100644
--- a/drivers/net/wireless/ath/carl9170/hw.h
+++ b/drivers/net/wireless/ath/carl9170/hw.h
@@ -807,6 +807,10 @@ enum cpu_clock {
 };
 
 /* USB endpoints */
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum ar9170_usb_ep {
 	/*
 	 * Control EP is always EP 0 (USB SPEC)
@@ -827,6 +831,9 @@ enum ar9170_usb_ep {
 
 	__AR9170_USB_NUM_MAX_EP		= 10
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 enum ar9170_usb_fifo {
 	__AR9170_USB_NUM_MAX_FIFO	= 10
diff --git a/drivers/net/wireless/realtek/rtlwifi/rtl8723com/fw_common.h b/drivers/net/wireless/realtek/rtlwifi/rtl8723com/fw_common.h
index 77c25a976233..37d6cb128450 100644
--- a/drivers/net/wireless/realtek/rtlwifi/rtl8723com/fw_common.h
+++ b/drivers/net/wireless/realtek/rtlwifi/rtl8723com/fw_common.h
@@ -49,6 +49,12 @@ enum version_8723e {
 	VERSION_UNKNOWN = 0xFF,
 };
 
+
+/* XXX: not sure wether the enum conflict is expected? */
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum rtl8723be_cmd {
 	H2C_8723BE_RSVDPAGE = 0,
 	H2C_8723BE_JOINBSSRPT = 1,
@@ -79,6 +85,9 @@ enum rtl8723be_cmd {
 	H2C_8723BE_P2P_PS_CTW_CMD,
 	MAX_8723BE_H2CCMD
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 void rtl8723ae_firmware_selfreset(struct ieee80211_hw *hw);
 void rtl8723be_firmware_selfreset(struct ieee80211_hw *hw);
diff --git a/drivers/net/wireless/realtek/rtlwifi/rtl8821ae/fw.h b/drivers/net/wireless/realtek/rtlwifi/rtl8821ae/fw.h
index 32d46d7128f5..96d170698ca1 100644
--- a/drivers/net/wireless/realtek/rtlwifi/rtl8821ae/fw.h
+++ b/drivers/net/wireless/realtek/rtlwifi/rtl8821ae/fw.h
@@ -151,6 +151,10 @@ enum rtl8812_c2h_evt {
 	MAX_8812_C2HEVENT
 };
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum rtl8821a_h2c_cmd {
 	H2C_8821AE_RSVDPAGE = 0,
 	H2C_8821AE_MSRRPT = 1,
@@ -182,6 +186,9 @@ enum rtl8821a_h2c_cmd {
 	H2C_8821AE_P2P_PS_CTW_CMD,
 	MAX_8821AE_H2CCMD
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 #define pagenum_128(_len)	(u32)(((_len)>>7) + ((_len)&0x7F ? 1 : 0))
 
diff --git a/drivers/staging/comedi/comedi.h b/drivers/staging/comedi/comedi.h
index a1c1081906c5..2fbc35f813d7 100644
--- a/drivers/staging/comedi/comedi.h
+++ b/drivers/staging/comedi/comedi.h
@@ -1321,6 +1321,10 @@ enum amplc_dio_ts_clock_src {
  * Values for setting a gate source with INSN_CONFIG_SET_GATE_SRC for
  * 8254 counter subdevices on Amplicon DIO boards (amplc_dio200 driver).
  */
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum amplc_dio_gate_source {
 	AMPLC_DIO_GAT_VCC,	/* internal high logic level */
 	AMPLC_DIO_GAT_GND,	/* internal low logic level */
@@ -1347,6 +1351,9 @@ enum amplc_dio_gate_source {
 	AMPLC_DIO_GAT_NPAT_OCCURRED, /* negated "pattern occurred" */
 	AMPLC_DIO_GAT_NPAT_GONE	/* negated "pattern gone away" */
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 /*
  * Values for setting a clock source with INSN_CONFIG_SET_CLOCK_SRC for
diff --git a/include/linux/mfd/max77686-private.h b/include/linux/mfd/max77686-private.h
index 643dae777b43..32ad3f3b7cb2 100644
--- a/include/linux/mfd/max77686-private.h
+++ b/include/linux/mfd/max77686-private.h
@@ -394,6 +394,10 @@ enum max77686_irq_source {
 	MAX77686_IRQ_GROUP_NR,
 };
 
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum max77686_irq {
 	MAX77686_PMICIRQ_PWRONF,
 	MAX77686_PMICIRQ_PWRONR,
@@ -414,6 +418,9 @@ enum max77686_irq {
 	MAX77686_RTCIRQ_RTC1S,
 	MAX77686_RTCIRQ_WTSR,
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 #define MAX77686_INT1_PWRONF_MSK	BIT(0)
 #define MAX77686_INT1_PWRONR_MSK	BIT(1)
diff --git a/include/uapi/linux/netfilter/nf_conntrack_common.h b/include/uapi/linux/netfilter/nf_conntrack_common.h
index 3fea7709a441..40250aa8ba3e 100644
--- a/include/uapi/linux/netfilter/nf_conntrack_common.h
+++ b/include/uapi/linux/netfilter/nf_conntrack_common.h
@@ -4,6 +4,13 @@
 /* Connection state tracking for netfilter.  This is separated from,
    but required by, the NAT layer; it can also be used by an iptables
    extension. */
+/* Having a duplicate value in this enum  is by design:
+ * IP_CT_ESTABLISHED_REPLY == IP_CT_IS_REPLY
+ */
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum ip_conntrack_info {
 	/* Part of an established connection (either direction). */
 	IP_CT_ESTABLISHED,
@@ -33,6 +40,9 @@ enum ip_conntrack_info {
 	IP_CT_UNTRACKED = 7,
 #endif
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 #define NF_CT_STATE_INVALID_BIT			(1 << 0)
 #define NF_CT_STATE_BIT(ctinfo)			(1 << ((ctinfo) % IP_CT_IS_REPLY + 1))
diff --git a/include/uapi/linux/nl80211.h b/include/uapi/linux/nl80211.h
index f882fe1f9709..b69681851bee 100644
--- a/include/uapi/linux/nl80211.h
+++ b/include/uapi/linux/nl80211.h
@@ -3926,6 +3926,10 @@ enum nl80211_bss_status {
  *	trying multiple times); this is invalid in netlink -- leave out
  *	the attribute for this on CONNECT commands.
  */
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum nl80211_auth_type {
 	NL80211_AUTHTYPE_OPEN_SYSTEM,
 	NL80211_AUTHTYPE_SHARED_KEY,
@@ -3941,6 +3945,9 @@ enum nl80211_auth_type {
 	NL80211_AUTHTYPE_MAX = __NL80211_AUTHTYPE_NUM - 1,
 	NL80211_AUTHTYPE_AUTOMATIC
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 /**
  * enum nl80211_key_type - Key Type
diff --git a/sound/pci/pcxhr/pcxhr.h b/sound/pci/pcxhr/pcxhr.h
index d799cbd37301..e327fe3ec535 100644
--- a/sound/pci/pcxhr/pcxhr.h
+++ b/sound/pci/pcxhr/pcxhr.h
@@ -46,6 +46,11 @@ struct pcxhr_mgr;
 struct pcxhr_stream;
 struct pcxhr_pipe;
 
+/* pcxhr_clock_type seems to duplicate entries on purpose */
+#ifdef __clang__
+#pragma GCC diagnostic push
+#pragma GCC diagnostic ignored "-Wduplicate-enum"
+#endif
 enum pcxhr_clock_type {
 	PCXHR_CLOCK_TYPE_INTERNAL = 0,
 	PCXHR_CLOCK_TYPE_WORD_CLOCK,
@@ -60,6 +65,9 @@ enum pcxhr_clock_type {
 	HR22_CLOCK_TYPE_AES_1,
 	HR22_CLOCK_TYPE_MAX = HR22_CLOCK_TYPE_AES_1,
 };
+#ifdef __clang__
+#pragma GCC diagnostic pop
+#endif
 
 struct pcxhr_mgr {
 	unsigned int num_cards;
-- 
