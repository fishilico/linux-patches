From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_git@polytechnique.org>
Date: Wed, 25 May 2016 20:53:05 +0200
Subject: [PATCH] {BUG} drm/i915: fix 32-bit shift overflow

clang reports:

    drivers/gpu/drm/i915/i915_gem_stolen.c:114:16: error: signed shift
    result (0xFFFF00000) requires 37 bits to represent, but 'int' only
    has 32 bits [-Werror,-Wshift-overflow]
                    base = bsm & BSM_MASK;
                                 ^~~~~~~~
    drivers/gpu/drm/i915/i915_reg.h:90:28: note: expanded from macro
    'BSM_MASK'
    #define   BSM_MASK (0xFFFF << 20)
                        ~~~~~~ ^  ~~
---
 drivers/gpu/drm/i915/i915_reg.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/i915/i915_reg.h b/drivers/gpu/drm/i915/i915_reg.h
index b407411e31ba..769ac8f7ab61 100644
--- a/drivers/gpu/drm/i915/i915_reg.h
+++ b/drivers/gpu/drm/i915/i915_reg.h
@@ -87,7 +87,7 @@ static inline bool i915_mmio_reg_valid(i915_reg_t reg)
 #define   DEVEN_MCHBAR_EN (1 << 28)
 
 #define BSM 0x5c
-#define   BSM_MASK (0xFFFF << 20)
+#define   BSM_MASK (0xFFF << 20)
 
 #define HPLLCC	0xc0 /* 85x only */
 #define   GC_CLOCK_CONTROL_MASK		(0x7 << 0)
-- 
