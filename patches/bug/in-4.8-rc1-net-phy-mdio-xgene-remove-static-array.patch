From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
Date: Sat, 6 Aug 2016 11:29:34 +0200
Subject: [PATCH] {BUG in 4.8-rc1} net/phy/mdio-xgene: remove static array
 declaration from header

---
 drivers/net/phy/mdio-xgene.c | 9 +++++++++
 drivers/net/phy/mdio-xgene.h | 3 +++
 2 files changed, 12 insertions(+)

diff --git a/drivers/net/phy/mdio-xgene.c b/drivers/net/phy/mdio-xgene.c
index 775674808249..303e275e715f 100644
--- a/drivers/net/phy/mdio-xgene.c
+++ b/drivers/net/phy/mdio-xgene.c
@@ -32,6 +32,15 @@
 #include <net/ip.h>
 #include "mdio-xgene.h"
 
+#ifdef CONFIG_OF
+static const struct of_device_id xgene_mdio_of_match[];
+#else
+static const struct of_device_id *xgene_mdio_of_match = NULL;
+#endif
+#ifdef CONFIG_ACPI
+static const struct acpi_device_id xgene_mdio_acpi_match[];
+#endif
+
 static bool xgene_mdio_status;
 
 static u32 xgene_enet_rd_mac(void __iomem *base_addr, u32 rd_addr)
diff --git a/drivers/net/phy/mdio-xgene.h b/drivers/net/phy/mdio-xgene.h
index 354241b53c1d..715970543e02 100644
--- a/drivers/net/phy/mdio-xgene.h
+++ b/drivers/net/phy/mdio-xgene.h
@@ -132,10 +132,13 @@ static inline u64 xgene_enet_get_field_value(int pos, int len, u64 src)
 #define GET_BIT(field, src) \
 		xgene_enet_get_field_value(field ## _POS, 1, src)
 
+/* buggy static arrays which trigger a clang warning:
+ * tentative array definition assumed to have one element
 static const struct of_device_id xgene_mdio_of_match[];
 #ifdef CONFIG_ACPI
 static const struct acpi_device_id xgene_mdio_acpi_match[];
 #endif
+*/
 int xgene_mdio_rgmii_read(struct mii_bus *bus, int phy_id, int reg);
 int xgene_mdio_rgmii_write(struct mii_bus *bus, int phy_id, int reg, u16 data);
 struct phy_device *xgene_enet_phy_register(struct mii_bus *bus, int phy_addr);
-- 
