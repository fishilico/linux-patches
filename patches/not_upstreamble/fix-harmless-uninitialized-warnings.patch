From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
Date: Wed, 18 Mar 2015 16:17:32 +0800
Subject: [PATCH] {NOT UPSTREAMABLE} fix harmless uninitialized warnings
 reported by clang

---
 arch/x86/kernel/cpu/mcheck/mce.c                          | 2 +-
 arch/x86/kernel/crash.c                                   | 2 +-
 arch/x86/kernel/hw_breakpoint.c                           | 1 +
 drivers/gpu/drm/i915/i915_gem.c                           | 2 +-
 drivers/gpu/drm/qxl/qxl_draw.c                            | 2 +-
 drivers/gpu/drm/vmwgfx/vmwgfx_execbuf.c                   | 1 +
 drivers/iio/common/ssp_sensors/ssp_iio.c                  | 3 ++-
 drivers/md/bcache/alloc.c                                 | 2 +-
 drivers/media/dvb-frontends/m88rs2000.c                   | 1 +
 drivers/media/dvb-frontends/mb86a20s.c                    | 1 +
 drivers/media/pci/cx23885/cx23885-av.c                    | 2 +-
 drivers/media/platform/am437x/am437x-vpfe.c               | 5 ++++-
 drivers/media/radio/radio-si476x.c                        | 6 ++++--
 drivers/media/rc/ite-cir.c                                | 2 +-
 drivers/media/tuners/tda8290.c                            | 2 ++
 drivers/misc/qcom-coincell.c                              | 4 ++++
 drivers/misc/sgi-xp/xpc_partition.c                       | 2 +-
 drivers/net/ethernet/intel/i40e/i40e_hmc.c                | 3 ++-
 drivers/net/ethernet/sun/niu.c                            | 1 +
 drivers/net/wireless/broadcom/b43/phy_lp.c                | 2 +-
 drivers/net/wireless/broadcom/brcm80211/brcmfmac/bcmsdh.c | 5 ++++-
 drivers/net/wireless/intel/iwlwifi/mvm/rx.c               | 2 +-
 drivers/net/wireless/realtek/rtlwifi/rtl8723be/phy.c      | 4 +++-
 drivers/nvdimm/namespace_devs.c                           | 2 +-
 drivers/pwm/pwm-img.c                                     | 2 +-
 drivers/scsi/qla2xxx/qla_mr.c                             | 1 +
 drivers/scsi/qla4xxx/ql4_os.c                             | 2 +-
 drivers/usb/atm/cxacru.c                                  | 3 ++-
 fs/btrfs/uuid-tree.c                                      | 3 ++-
 fs/ocfs2/localalloc.c                                     | 1 +
 fs/xfs/libxfs/xfs_dir2_node.c                             | 6 ++++--
 fs/xfs/libxfs/xfs_ialloc.c                                | 2 +-
 include/linux/sunrpc/cache.h                              | 2 +-
 kernel/time/posix-cpu-timers.c                            | 2 ++
 mm/filemap.c                                              | 2 +-
 net/mac80211/mlme.c                                       | 2 +-
 net/mac80211/tdls.c                                       | 2 ++
 net/mac80211/tx.c                                         | 2 +-
 net/netfilter/core.c                                      | 2 +-
 net/nfc/nci/hci.c                                         | 1 +
 net/tipc/socket.c                                         | 3 ++-
 scripts/sortextable.h                                     | 1 +
 42 files changed, 67 insertions(+), 31 deletions(-)

diff --git a/arch/x86/kernel/cpu/mcheck/mce.c b/arch/x86/kernel/cpu/mcheck/mce.c
index f0c921b03e42..801c06bab3d1 100644
--- a/arch/x86/kernel/cpu/mcheck/mce.c
+++ b/arch/x86/kernel/cpu/mcheck/mce.c
@@ -998,7 +998,7 @@ void do_machine_check(struct pt_regs *regs, long error_code)
 	 * Establish sequential order between the CPUs entering the machine
 	 * check handler.
 	 */
-	int order;
+	int order = 0; /* gcc -Wmaybe-uninitialized false positive */
 	/*
 	 * If no_way_out gets set, there is no safe way to recover from this
 	 * MCE.  If mca_cfg.tolerant is cranked up, we'll try anyway.
diff --git a/arch/x86/kernel/crash.c b/arch/x86/kernel/crash.c
index 9ef978d69c22..5983b5bc8718 100644
--- a/arch/x86/kernel/crash.c
+++ b/arch/x86/kernel/crash.c
@@ -616,7 +616,7 @@ static int determine_backup_region(u64 start, u64 end, void *arg)
 int crash_load_segments(struct kimage *image)
 {
 	unsigned long src_start, src_sz, elf_sz;
-	void *elf_addr;
+	void *elf_addr = NULL; /* gcc -Wmaybe-uninitialized false positive */
 	int ret;
 
 	/*
diff --git a/arch/x86/kernel/hw_breakpoint.c b/arch/x86/kernel/hw_breakpoint.c
index 2bcfb5f2bc44..131bedd5bb4b 100644
--- a/arch/x86/kernel/hw_breakpoint.c
+++ b/arch/x86/kernel/hw_breakpoint.c
@@ -351,6 +351,7 @@ int arch_validate_hwbkpt_settings(struct perf_event *bp)
 #endif
 	default:
 		WARN_ON_ONCE(1);
+		align = 0;
 	}
 
 	/*
diff --git a/drivers/gpu/drm/i915/i915_gem.c b/drivers/gpu/drm/i915/i915_gem.c
index dabc08987b5e..afaad928b6aa 100644
--- a/drivers/gpu/drm/i915/i915_gem.c
+++ b/drivers/gpu/drm/i915/i915_gem.c
@@ -1170,7 +1170,7 @@ static unsigned long local_clock_us(unsigned *cpu)
 
 static bool busywait_stop(unsigned long timeout, unsigned cpu)
 {
-	unsigned this_cpu;
+	unsigned this_cpu = 0; /* -Wsometimes-uninitialized false positive */
 
 	if (time_after(local_clock_us(&this_cpu), timeout))
 		return true;
diff --git a/drivers/gpu/drm/qxl/qxl_draw.c b/drivers/gpu/drm/qxl/qxl_draw.c
index 56e1d633875e..7bc9fc8396ae 100644
--- a/drivers/gpu/drm/qxl/qxl_draw.c
+++ b/drivers/gpu/drm/qxl/qxl_draw.c
@@ -280,7 +280,7 @@ void qxl_draw_dirty_fb(struct qxl_device *qdev,
 	int i;
 	int left, right, top, bottom;
 	int width, height;
-	struct qxl_drawable *drawable;
+	struct qxl_drawable *drawable = NULL;
 	struct qxl_rect drawable_rect;
 	struct qxl_rect *rects;
 	int stride = qxl_fb->base.pitches[0];
diff --git a/drivers/gpu/drm/vmwgfx/vmwgfx_execbuf.c b/drivers/gpu/drm/vmwgfx/vmwgfx_execbuf.c
index 723ba16c6084..163fdd431683 100644
--- a/drivers/gpu/drm/vmwgfx/vmwgfx_execbuf.c
+++ b/drivers/gpu/drm/vmwgfx/vmwgfx_execbuf.c
@@ -4054,6 +4054,7 @@ int vmw_execbuf_process(struct drm_file *file_priv,
 		goto out_err;
 
 	vmw_query_bo_switch_commit(dev_priv, sw_context);
+	handle = 0; /* BUG? */
 	ret = vmw_execbuf_fence_commands(file_priv, dev_priv,
 					 &fence,
 					 (user_fence_rep) ? &handle : NULL);
diff --git a/drivers/iio/common/ssp_sensors/ssp_iio.c b/drivers/iio/common/ssp_sensors/ssp_iio.c
index a3ae165f8d9f..196350b5f9fb 100644
--- a/drivers/iio/common/ssp_sensors/ssp_iio.c
+++ b/drivers/iio/common/ssp_sensors/ssp_iio.c
@@ -95,7 +95,8 @@ int ssp_common_process_data(struct iio_dev *indio_dev, void *buf,
 		memcpy(&time, &((char *)buf)[len], SSP_TIME_SIZE);
 		calculated_time =
 			timestamp + (int64_t)le32_to_cpu(time) * 1000000;
-	}
+	} else
+		calculated_time = 0; /* BUG? */
 
 	return iio_push_to_buffers_with_timestamp(indio_dev, spd->buffer,
 						  calculated_time);
diff --git a/drivers/md/bcache/alloc.c b/drivers/md/bcache/alloc.c
index 8eeab72b93e2..388d982fc9b7 100644
--- a/drivers/md/bcache/alloc.c
+++ b/drivers/md/bcache/alloc.c
@@ -323,7 +323,7 @@ static int bch_allocator_thread(void *arg)
 		 * the free list:
 		 */
 		while (!fifo_empty(&ca->free_inc)) {
-			long bucket;
+			long bucket = 0;
 
 			fifo_pop(&ca->free_inc, bucket);
 
diff --git a/drivers/media/dvb-frontends/m88rs2000.c b/drivers/media/dvb-frontends/m88rs2000.c
index a09b12313a73..0e9975ce8cc5 100644
--- a/drivers/media/dvb-frontends/m88rs2000.c
+++ b/drivers/media/dvb-frontends/m88rs2000.c
@@ -681,6 +681,7 @@ static int m88rs2000_set_frontend(struct dvb_frontend *fe)
 	if (ret < 0)
 		return -ENODEV;
 
+	status = 0; /* BUG? */
 	for (i = 0; i < 25; i++) {
 		reg = m88rs2000_readreg(state, 0x8c);
 		if ((reg & 0xee) == 0xee) {
diff --git a/drivers/media/dvb-frontends/mb86a20s.c b/drivers/media/dvb-frontends/mb86a20s.c
index fb88dddaf3a3..9f7ea694afd2 100644
--- a/drivers/media/dvb-frontends/mb86a20s.c
+++ b/drivers/media/dvb-frontends/mb86a20s.c
@@ -1970,6 +1970,7 @@ static int mb86a20s_read_status_and_stats(struct dvb_frontend *fe,
 	if (status_nr < 0) {
 		dev_err(&state->i2c->dev,
 			"%s: Can't read frontend lock status\n", __func__);
+		rc = status_nr; /* BUG? need to watch linux-next to see if it is already reported. */
 		goto error;
 	}
 
diff --git a/drivers/media/pci/cx23885/cx23885-av.c b/drivers/media/pci/cx23885/cx23885-av.c
index 877dad89107e..911e393498ec 100644
--- a/drivers/media/pci/cx23885/cx23885-av.c
+++ b/drivers/media/pci/cx23885/cx23885-av.c
@@ -24,7 +24,7 @@ void cx23885_av_work_handler(struct work_struct *work)
 {
 	struct cx23885_dev *dev =
 			   container_of(work, struct cx23885_dev, cx25840_work);
-	bool handled;
+	bool handled = false; /* BUG? */
 
 	v4l2_subdev_call(dev->sd_cx25840, core, interrupt_service_routine,
 			 PCI_MSK_AV_CORE, &handled);
diff --git a/drivers/media/platform/am437x/am437x-vpfe.c b/drivers/media/platform/am437x/am437x-vpfe.c
index de32e3a3d4d1..5dbb9c61d1fa 100644
--- a/drivers/media/platform/am437x/am437x-vpfe.c
+++ b/drivers/media/platform/am437x/am437x-vpfe.c
@@ -1074,6 +1074,7 @@ static int vpfe_config_ccdc_image_format(struct vpfe_device *vpfe)
 	case V4L2_FIELD_NONE:
 		frm_fmt = CCDC_FRMFMT_PROGRESSIVE;
 		/* buffer type only applicable for interlaced scan */
+		ret = 0; /* BUG? */
 		break;
 
 	case V4L2_FIELD_SEQ_TB:
@@ -1588,8 +1589,10 @@ static int vpfe_s_fmt(struct file *file, void *priv,
 		ret = __vpfe_set_format(vpfe, fmt, &bpp);
 		if (ret)
 			return ret;
-	} else /* Just make sure all of the fields are consistent */
+	} else { /* Just make sure all of the fields are consistent */
 		*fmt = format;
+		bpp = 0;
+	}
 
 	/* First detach any IRQ if currently attached */
 	vpfe_detach_irq(vpfe);
diff --git a/drivers/media/radio/radio-si476x.c b/drivers/media/radio/radio-si476x.c
index 271f725b17e8..aa5f865d47f4 100644
--- a/drivers/media/radio/radio-si476x.c
+++ b/drivers/media/radio/radio-si476x.c
@@ -775,7 +775,8 @@ static int si476x_radio_s_hw_freq_seek(struct file *file, void *priv,
 			rangelow = si476x_to_v4l2(radio->core, rangelow);
 		else
 			goto unlock;
-	}
+	} else
+		rangelow = 0; /* BUG? */
 	if (!seek->rangehigh) {
 		err = regmap_read(radio->core->regmap,
 				  SI476X_PROP_SEEK_BAND_TOP,
@@ -784,7 +785,8 @@ static int si476x_radio_s_hw_freq_seek(struct file *file, void *priv,
 			rangehigh = si476x_to_v4l2(radio->core, rangehigh);
 		else
 			goto unlock;
-	}
+	} else
+		rangehigh = 0; /* BUG? */
 
 	if (rangelow > rangehigh) {
 		err = -EINVAL;
diff --git a/drivers/media/rc/ite-cir.c b/drivers/media/rc/ite-cir.c
index 0f301903aa6f..4ddb2d9b9465 100644
--- a/drivers/media/rc/ite-cir.c
+++ b/drivers/media/rc/ite-cir.c
@@ -228,7 +228,7 @@ static void ite_set_carrier_params(struct ite_dev *dev)
 {
 	unsigned int freq, low_freq, high_freq;
 	int allowance;
-	bool use_demodulator;
+	bool use_demodulator = true; /* BUG? */
 	bool for_tx = dev->transmitting;
 
 	ite_dbg("%s called", __func__);
diff --git a/drivers/media/tuners/tda8290.c b/drivers/media/tuners/tda8290.c
index 998e82bba9c0..d8290cc9037d 100644
--- a/drivers/media/tuners/tda8290.c
+++ b/drivers/media/tuners/tda8290.c
@@ -240,6 +240,8 @@ static void tda8290_set_params(struct dvb_frontend *fe,
 	if (fe->ops.tuner_ops.set_analog_params)
 		fe->ops.tuner_ops.set_analog_params(fe, params);
 
+	adc_sat = 0; /* BUG? */
+	agc_stat = 0; /* BUG? */
 	for (i = 0; i < 3; i++) {
 		tuner_i2c_xfer_send_recv(&priv->i2c_props,
 					 &addr_pll_stat, 1, &pll_stat, 1);
diff --git a/drivers/misc/qcom-coincell.c b/drivers/misc/qcom-coincell.c
index 7b4a2da487a5..be20d59828da 100644
--- a/drivers/misc/qcom-coincell.c
+++ b/drivers/misc/qcom-coincell.c
@@ -126,6 +126,10 @@ static int qcom_coincell_probe(struct platform_device *pdev)
 			    "can't find 'qcom,vset-millivolts' in DT block");
 			return rc;
 		}
+	} else {
+		/* make clang happy, as rset and vset are never used when !enable */
+		rset = 0;
+		vset = 0;
 	}
 
 	return qcom_coincell_chgr_config(&chgr, rset, vset, enable);
diff --git a/drivers/misc/sgi-xp/xpc_partition.c b/drivers/misc/sgi-xp/xpc_partition.c
index 6956f7e7d439..fef483217b23 100644
--- a/drivers/misc/sgi-xp/xpc_partition.c
+++ b/drivers/misc/sgi-xp/xpc_partition.c
@@ -70,7 +70,7 @@ xpc_get_rsvd_page_pa(int nasid)
 	unsigned long rp_pa = nasid;	/* seed with nasid */
 	size_t len = 0;
 	size_t buf_len = 0;
-	void *buf = buf;
+	void *buf = NULL; /* BUG? */
 	void *buf_base = NULL;
 	enum xp_retval (*get_partition_rsvd_page_pa)
 		(void *, u64 *, unsigned long *, size_t *) =
diff --git a/drivers/net/ethernet/intel/i40e/i40e_hmc.c b/drivers/net/ethernet/intel/i40e/i40e_hmc.c
index 5ebe12d56ebf..c873f8d79da9 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_hmc.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_hmc.c
@@ -99,7 +99,8 @@ i40e_status i40e_add_sd_table_entry(struct i40e_hw *hw,
 
 		/* increment the ref count */
 		I40E_INC_SD_REFCNT(&hmc_info->sd_table);
-	}
+	} else
+		ret_code = 0; /* BUG? */
 	/* Increment backing page reference count */
 	if (I40E_SD_TYPE_DIRECT == sd_entry->entry_type)
 		I40E_INC_BP_REFCNT(&sd_entry->u.bp);
diff --git a/drivers/net/ethernet/sun/niu.c b/drivers/net/ethernet/sun/niu.c
index 9cc45649f477..7e3f0ae6a974 100644
--- a/drivers/net/ethernet/sun/niu.c
+++ b/drivers/net/ethernet/sun/niu.c
@@ -7486,6 +7486,7 @@ static int niu_add_ethtool_tcam_entry(struct niu *np,
 					class = CLASS_CODE_USER_PROG4;
 					break;
 				default:
+					class = 0; /* BUG? */
 					break;
 				}
 				ret = tcam_user_ip_class_set(np, class, 0,
diff --git a/drivers/net/wireless/broadcom/b43/phy_lp.c b/drivers/net/wireless/broadcom/b43/phy_lp.c
index 058a9f232050..0e136ef1c86d 100644
--- a/drivers/net/wireless/broadcom/b43/phy_lp.c
+++ b/drivers/net/wireless/broadcom/b43/phy_lp.c
@@ -1834,7 +1834,7 @@ static void lpphy_papd_cal(struct b43_wldev *dev, struct lpphy_tx_gains gains,
 static void lpphy_papd_cal_txpwr(struct b43_wldev *dev)
 {
 	struct b43_phy_lp *lpphy = dev->phy.lp;
-	struct lpphy_tx_gains gains, oldgains;
+	struct lpphy_tx_gains gains = {} /* harmless BUG */, oldgains;
 	int old_txpctl, old_afe_ovr, old_rf, old_bbmult;
 
 	lpphy_read_tx_pctl_mode_from_hardware(dev);
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/bcmsdh.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/bcmsdh.c
index da0cdd313880..20c1f1da8394 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/bcmsdh.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/bcmsdh.c
@@ -289,6 +289,7 @@ static int brcmf_sdiod_request_data(struct brcmf_sdio_dev *sdiodev, u8 fn,
 		break;
 	default:
 		brcmf_err("invalid size: %d\n", regsz);
+		ret = -EINVAL; /* BUG? */
 		break;
 	}
 
@@ -421,8 +422,10 @@ u32 brcmf_sdiod_regrl(struct brcmf_sdio_dev *sdiodev, u32 addr, int *ret)
 
 	brcmf_dbg(SDIO, "addr:0x%08x\n", addr);
 	retval = brcmf_sdiod_addrprep(sdiodev, sizeof(data), &addr);
-	if (retval)
+	if (retval) {
+		data = 0; /* BUG? */
 		goto done;
+	}
 	retval = brcmf_sdiod_regrw_helper(sdiodev, addr, sizeof(data), &data,
 					  false);
 	brcmf_dbg(SDIO, "data:0x%08x\n", data);
diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/rx.c b/drivers/net/wireless/intel/iwlwifi/mvm/rx.c
index 485cfc1a4daa..a3b1fecc5fe4 100644
--- a/drivers/net/wireless/intel/iwlwifi/mvm/rx.c
+++ b/drivers/net/wireless/intel/iwlwifi/mvm/rx.c
@@ -267,7 +267,7 @@ void iwl_mvm_rx_rx_mpdu(struct iwl_mvm *mvm, struct napi_struct *napi,
 	struct ieee80211_sta *sta = NULL;
 	struct sk_buff *skb;
 	u32 len;
-	u32 ampdu_status;
+	u32 ampdu_status = 0; /* BUG? */
 	u32 rate_n_flags;
 	u32 rx_pkt_status;
 	u8 crypt_len = 0;
diff --git a/drivers/net/wireless/realtek/rtlwifi/rtl8723be/phy.c b/drivers/net/wireless/realtek/rtlwifi/rtl8723be/phy.c
index b7b73cbe346d..25e1dadf7253 100644
--- a/drivers/net/wireless/realtek/rtlwifi/rtl8723be/phy.c
+++ b/drivers/net/wireless/realtek/rtlwifi/rtl8723be/phy.c
@@ -1031,9 +1031,11 @@ static u8 _rtl8723be_get_txpower_index(struct ieee80211_hw *hw, u8 path,
 		txpower = rtlefuse->txpwrlevel_cck[path][index];
 	else if (DESC92C_RATE6M <= rate)
 		txpower = rtlefuse->txpwrlevel_ht40_1s[path][index];
-	else
+	else {
 		RT_TRACE(rtlpriv, COMP_POWER_TRACKING, DBG_LOUD,
 			 "invalid rate\n");
+		txpower = 0;
+	}
 
 	if (DESC92C_RATE6M <= rate && rate <= DESC92C_RATE54M &&
 	    !RX_HAL_IS_CCK_RATE(rate))
diff --git a/drivers/nvdimm/namespace_devs.c b/drivers/nvdimm/namespace_devs.c
index f5cb88601359..fefb781dbf89 100644
--- a/drivers/nvdimm/namespace_devs.c
+++ b/drivers/nvdimm/namespace_devs.c
@@ -1379,7 +1379,7 @@ struct nd_namespace_common *nvdimm_namespace_common_probe(struct device *dev)
 {
 	struct nd_btt *nd_btt = is_nd_btt(dev) ? to_nd_btt(dev) : NULL;
 	struct nd_pfn *nd_pfn = is_nd_pfn(dev) ? to_nd_pfn(dev) : NULL;
-	struct nd_namespace_common *ndns;
+	struct nd_namespace_common *ndns = NULL; /* harmless bug */
 	resource_size_t size;
 
 	if (nd_btt || nd_pfn) {
diff --git a/drivers/pwm/pwm-img.c b/drivers/pwm/pwm-img.c
index 2fb30deee345..c2fbc56794fc 100644
--- a/drivers/pwm/pwm-img.c
+++ b/drivers/pwm/pwm-img.c
@@ -115,7 +115,7 @@ static int img_pwm_config(struct pwm_chip *chip, struct pwm_device *pwm,
 	} else if (mul <= max_timebase * 512) {
 		div = PWM_CTRL_CFG_SUB_DIV0_DIV1;
 		timebase = DIV_ROUND_UP(mul, 512);
-	} else if (mul > max_timebase * 512) {
+	} else /* if (mul > max_timebase * 512) */ {
 		dev_err(chip->dev,
 			"failed to configure timebase steps/divider value\n");
 		return -EINVAL;
diff --git a/drivers/scsi/qla2xxx/qla_mr.c b/drivers/scsi/qla2xxx/qla_mr.c
index b5029e543b91..e90bb8ca1336 100644
--- a/drivers/scsi/qla2xxx/qla_mr.c
+++ b/drivers/scsi/qla2xxx/qla_mr.c
@@ -2225,6 +2225,7 @@ qlafx00_ioctl_iosb_entry(scsi_qla_host_t *vha, struct req_que *req,
 		if (iocb_job->u.fxiocb.flags & SRB_FXDISC_RSP_DWRD_VALID)
 			iocb_job->u.fxiocb.req_data =
 			    pkt->dataword_r;
+		res = iocb_job->u.fxiocb.result; /* BUG? */
 	} else {
 		bsg_job = sp->u.bsg_job;
 
diff --git a/drivers/scsi/qla4xxx/ql4_os.c b/drivers/scsi/qla4xxx/ql4_os.c
index 01c3610a60cf..d91be37a3004 100644
--- a/drivers/scsi/qla4xxx/ql4_os.c
+++ b/drivers/scsi/qla4xxx/ql4_os.c
@@ -5873,7 +5873,7 @@ static void qla4xxx_boot_release(void *data)
 
 static int get_fw_boot_info(struct scsi_qla_host *ha, uint16_t ddb_index[])
 {
-	dma_addr_t buf_dma;
+	dma_addr_t buf_dma = 0; /* BUG? */
 	uint32_t addr, pri_addr, sec_addr;
 	uint32_t offset;
 	uint16_t func_num;
diff --git a/drivers/usb/atm/cxacru.c b/drivers/usb/atm/cxacru.c
index 2936f3876ce5..fddd5d058386 100644
--- a/drivers/usb/atm/cxacru.c
+++ b/drivers/usb/atm/cxacru.c
@@ -1112,7 +1112,8 @@ static int cxacru_heavy_init(struct usbatm_data *usbatm_instance,
 			release_firmware(fw);
 			return ret;
 		}
-	}
+	} else
+		bp = NULL; /* BUG? */
 
 	cxacru_upload_firmware(instance, fw, bp);
 
diff --git a/fs/btrfs/uuid-tree.c b/fs/btrfs/uuid-tree.c
index 778282944530..0c1b403514bc 100644
--- a/fs/btrfs/uuid-tree.c
+++ b/fs/btrfs/uuid-tree.c
@@ -142,7 +142,8 @@ int btrfs_uuid_tree_add(struct btrfs_trans_handle *trans,
 			ret, (unsigned long long)key.objectid,
 			(unsigned long long)key.offset, type);
 		goto out;
-	}
+	} else
+		BUG();
 
 	ret = 0;
 	subid_le = cpu_to_le64(subid_cpu);
diff --git a/fs/ocfs2/localalloc.c b/fs/ocfs2/localalloc.c
index fe0d1f9571bb..202b795867fa 100644
--- a/fs/ocfs2/localalloc.c
+++ b/fs/ocfs2/localalloc.c
@@ -844,6 +844,7 @@ static int ocfs2_local_alloc_find_clear_bits(struct ocfs2_super *osb,
 
 	if (!alloc->id1.bitmap1.i_total) {
 		bitoff = -1;
+		numfound = 0;
 		goto bail;
 	}
 
diff --git a/fs/xfs/libxfs/xfs_dir2_node.c b/fs/xfs/libxfs/xfs_dir2_node.c
index 75a557432d0f..f43bc74aea02 100644
--- a/fs/xfs/libxfs/xfs_dir2_node.c
+++ b/fs/xfs/libxfs/xfs_dir2_node.c
@@ -381,12 +381,12 @@ xfs_dir2_leafn_add(
 {
 	int			compact;	/* compacting stale leaves */
 	xfs_inode_t		*dp;		/* incore directory inode */
-	int			highstale;	/* next stale entry */
+	int			highstale = 0;	/* next stale entry */
 	xfs_dir2_leaf_t		*leaf;		/* leaf structure */
 	xfs_dir2_leaf_entry_t	*lep;		/* leaf entry */
 	int			lfloghigh;	/* high leaf entry logging */
 	int			lfloglow;	/* low leaf entry logging */
-	int			lowstale;	/* previous stale entry */
+	int			lowstale = 0;	/* previous stale entry */
 	struct xfs_dir3_icleaf_hdr leafhdr;
 	struct xfs_dir2_leaf_entry *ents;
 
@@ -437,6 +437,8 @@ xfs_dir2_leafn_add(
 		 */
 		lfloglow = leafhdr.count;
 		lfloghigh = -1;
+		highstale = 0; /* Make clang happy */
+		lowstale = 0; /* Make clang happy */
 	}
 
 	/*
diff --git a/fs/xfs/libxfs/xfs_ialloc.c b/fs/xfs/libxfs/xfs_ialloc.c
index 22297f9b0fd5..3e43d073fb47 100644
--- a/fs/xfs/libxfs/xfs_ialloc.c
+++ b/fs/xfs/libxfs/xfs_ialloc.c
@@ -2026,7 +2026,7 @@ xfs_difree_finobt(
 	struct xfs_agi			*agi = XFS_BUF_TO_AGI(agbp);
 	xfs_agnumber_t			agno = be32_to_cpu(agi->agi_seqno);
 	struct xfs_btree_cur		*cur;
-	struct xfs_inobt_rec_incore	rec;
+	struct xfs_inobt_rec_incore	rec = {}; /* gcc -Wmaybe-uninitialized false positive */
 	int				offset = agino - ibtrec->ir_startino;
 	int				error;
 	int				i;
diff --git a/include/linux/sunrpc/cache.h b/include/linux/sunrpc/cache.h
index ed03c9f7f908..7cb947472d6b 100644
--- a/include/linux/sunrpc/cache.h
+++ b/include/linux/sunrpc/cache.h
@@ -295,7 +295,7 @@ static inline int get_time(char **bpp, time_t *time)
 
 static inline time_t get_expiry(char **bpp)
 {
-	time_t rv;
+	time_t rv = 0; /* gcc -Wmaybe-uninitialized false positive */
 	struct timespec boot;
 
 	if (get_time(bpp, &rv))
diff --git a/kernel/time/posix-cpu-timers.c b/kernel/time/posix-cpu-timers.c
index 1cafba860b08..83eaad19b325 100644
--- a/kernel/time/posix-cpu-timers.c
+++ b/kernel/time/posix-cpu-timers.c
@@ -777,6 +777,8 @@ static void posix_cpu_timer_get(struct k_itimer *timer, struct itimerspec *itp)
 			timer->it.cpu.expires = 0;
 			sample_to_timespec(timer->it_clock, timer->it.cpu.expires,
 					   &itp->it_value);
+			/* Make clang happy even if it useless */
+			now = 0;
 		} else {
 			cpu_timer_sample_group(timer->it_clock, p, &now);
 			unlock_task_sighand(p, &flags);
diff --git a/mm/filemap.c b/mm/filemap.c
index f2479af09da9..0730aeaaf8a9 100644
--- a/mm/filemap.c
+++ b/mm/filemap.c
@@ -631,7 +631,7 @@ static int __add_to_page_cache_locked(struct page *page,
 				      void **shadowp)
 {
 	int huge = PageHuge(page);
-	struct mem_cgroup *memcg;
+	struct mem_cgroup *memcg = NULL;
 	int error;
 
 	VM_BUG_ON_PAGE(!PageLocked(page), page);
diff --git a/net/mac80211/mlme.c b/net/mac80211/mlme.c
index 281b8d6e5109..1f81fb917b53 100644
--- a/net/mac80211/mlme.c
+++ b/net/mac80211/mlme.c
@@ -1318,7 +1318,7 @@ static u32 ieee80211_handle_pwr_constr(struct ieee80211_sub_if_data *sdata,
 {
 	bool has_80211h_pwr = false, has_cisco_pwr = false;
 	int chan_pwr = 0, pwr_reduction_80211h = 0;
-	int pwr_level_cisco, pwr_level_80211h;
+	int pwr_level_cisco = 0 /* gcc -Wmaybe-uninitialized false positive */, pwr_level_80211h;
 	int new_ap_level;
 	__le16 capab = mgmt->u.probe_resp.capab_info;
 
diff --git a/net/mac80211/tdls.c b/net/mac80211/tdls.c
index a29ea813b7d5..2c895f0f8767 100644
--- a/net/mac80211/tdls.c
+++ b/net/mac80211/tdls.c
@@ -1754,6 +1754,8 @@ call_drv:
 		 "TDLS channel switch response received from %pM status %d\n",
 		 tf->sa, params.status);
 
+	ret = 0; /* BUG? */
+
 out:
 	mutex_unlock(&local->sta_mtx);
 	dev_kfree_skb_any(params.tmpl_skb);
diff --git a/net/mac80211/tx.c b/net/mac80211/tx.c
index 21f6602395f7..90e993eb398a 100644
--- a/net/mac80211/tx.c
+++ b/net/mac80211/tx.c
@@ -2097,7 +2097,7 @@ static struct sk_buff *ieee80211_build_hdr(struct ieee80211_sub_if_data *sdata,
 	bool tdls_peer;
 	bool multicast;
 	u16 info_id = 0;
-	struct ieee80211_chanctx_conf *chanctx_conf;
+	struct ieee80211_chanctx_conf *chanctx_conf = NULL; /* gcc -Wmaybe-uninitialized false positive */
 	struct ieee80211_sub_if_data *ap_sdata;
 	enum ieee80211_band band;
 	int ret;
diff --git a/net/netfilter/core.c b/net/netfilter/core.c
index f39276d1c2d7..420673824372 100644
--- a/net/netfilter/core.c
+++ b/net/netfilter/core.c
@@ -123,7 +123,7 @@ EXPORT_SYMBOL(nf_register_net_hook);
 void nf_unregister_net_hook(struct net *net, const struct nf_hook_ops *reg)
 {
 	struct list_head *hook_list;
-	struct nf_hook_entry *entry;
+	struct nf_hook_entry *entry = NULL; /* gcc -Wmaybe-uninitialized false positive because entry is always initialized when used */
 	struct nf_hook_ops *elem;
 
 	hook_list = nf_find_hook_list(net, reg);
diff --git a/net/nfc/nci/hci.c b/net/nfc/nci/hci.c
index a0ab26d535dc..6ad74ff10308 100644
--- a/net/nfc/nci/hci.c
+++ b/net/nfc/nci/hci.c
@@ -745,6 +745,7 @@ int nci_hci_dev_session_init(struct nci_dev *ndev)
 				 ndev->hci_dev->init_data.gates[0].dest_host,
 				 ndev->hci_dev->init_data.gates[0].gate,
 				 ndev->hci_dev->init_data.gates[0].pipe);
+	skb = NULL; /* BUG? */
 	if (r < 0)
 		return r;
 
diff --git a/net/tipc/socket.c b/net/tipc/socket.c
index 3eeb50a27b89..b5f04734398a 100644
--- a/net/tipc/socket.c
+++ b/net/tipc/socket.c
@@ -917,7 +917,8 @@ static int __tipc_sendmsg(struct socket *sock, struct msghdr *m, size_t dsz)
 		msg_set_destnode(mhdr, dnode);
 		msg_set_destport(mhdr, dest->addr.id.ref);
 		msg_set_hdr_sz(mhdr, BASIC_H_SIZE);
-	}
+	} else
+		dnode = 0; /* BUG? */
 
 	skb_queue_head_init(&pktchain);
 	save = m->msg_iter;
diff --git a/scripts/sortextable.h b/scripts/sortextable.h
index 53aed5946dee..4a659e1d45df 100644
--- a/scripts/sortextable.h
+++ b/scripts/sortextable.h
@@ -177,6 +177,7 @@ do_func(Elf_Ehdr *ehdr, char const *const fname, table_sort_t custom_sort)
 
 	/* find main_extable_sort_needed */
 	sort_needed_sym = NULL;
+	sym = NULL; /* This affectation is useless but prevents a warning */
 	for (i = 0; i < _r(&symtab_sec->sh_size) / sizeof(Elf_Sym); i++) {
 		sym = (void *)ehdr + _r(&symtab_sec->sh_offset);
 		sym += i;
-- 
