From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
Date: Sat, 12 Nov 2016 15:08:38 +0100
Subject: [PATCH] {NOT UPSTREAMABLE} kasan: implement __asan_alloca_poison and
 __asan_allocas_unpoison for clang

clang 3.8.0 needs these functions
---
 mm/kasan/kasan.c | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

diff --git a/mm/kasan/kasan.c b/mm/kasan/kasan.c
index ca11bc4ce205..886a840c139a 100644
--- a/mm/kasan/kasan.c
+++ b/mm/kasan/kasan.c
@@ -736,6 +736,23 @@ void __asan_unpoison_stack_memory(const void *addr, size_t size)
 }
 EXPORT_SYMBOL(__asan_unpoison_stack_memory);
 
+void __asan_alloca_poison(unsigned long addr, unsigned long size) {
+	/* TODO */
+}
+EXPORT_SYMBOL(__asan_alloca_poison);
+
+void __asan_allocas_unpoison(unsigned long top, unsigned long bottom) {
+	/* TODO */
+	if ((!top) || (top > bottom)) return;
+	kasan_unpoison_shadow((void *)top, bottom - top);
+}
+EXPORT_SYMBOL(__asan_allocas_unpoison);
+
+void __asan_set_shadow_00(unsigned long addr, unsigned long size) {
+	/* TODO */
+}
+EXPORT_SYMBOL(__asan_set_shadow_00);
+
 #ifdef CONFIG_MEMORY_HOTPLUG
 static int __meminit kasan_mem_notifier(struct notifier_block *nb,
 			unsigned long action, void *data)
-- 
