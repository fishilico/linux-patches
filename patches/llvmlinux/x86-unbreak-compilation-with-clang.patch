From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
Date: Fri, 26 Oct 2018 23:27:29 +0200
Subject: [PATCH] {For LLVMLinux} x86: unbreak compilation with clang

giving - to the assembler makes it wait on stdin
---
 arch/x86/Makefile | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/arch/x86/Makefile b/arch/x86/Makefile
index a49536d3ae64..49733b583462 100644
--- a/arch/x86/Makefile
+++ b/arch/x86/Makefile
@@ -239,7 +239,11 @@ archheaders:
 archmacros:
 	$(Q)$(MAKE) $(build)=arch/x86/kernel arch/x86/kernel/macros.s
 
+ifdef CONFIG_CC_IS_CLANG
+ASM_MACRO_FLAGS = -Wa,arch/x86/kernel/macros.s
+else
 ASM_MACRO_FLAGS = -Wa,arch/x86/kernel/macros.s -Wa,-
+endif
 export ASM_MACRO_FLAGS
 KBUILD_CFLAGS += $(ASM_MACRO_FLAGS)
 
-- 
