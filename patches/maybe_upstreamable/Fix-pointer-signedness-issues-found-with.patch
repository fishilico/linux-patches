From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
Date: Tue, 17 Mar 2015 20:43:16 +0800
Subject: [PATCH] {MAYBE UPS} Fix pointer signedness issues found with
 -Wpointer-sign

Signed-off-by: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
---
 include/linux/seq_buf.h | 2 +-
 include/linux/sysfs.h   | 2 +-
 include/net/sock.h      | 5 +++--
 kernel/fork.c           | 4 ++--
 4 files changed, 7 insertions(+), 6 deletions(-)

diff --git a/include/linux/seq_buf.h b/include/linux/seq_buf.h
index fb7eb9ccb1cd..91309015b6e8 100644
--- a/include/linux/seq_buf.h
+++ b/include/linux/seq_buf.h
@@ -31,7 +31,7 @@ static inline void seq_buf_clear(struct seq_buf *s)
 static inline void
 seq_buf_init(struct seq_buf *s, unsigned char *buf, unsigned int size)
 {
-	s->buffer = buf;
+	s->buffer = (char *)buf;
 	s->size = size;
 	seq_buf_clear(s);
 }
diff --git a/include/linux/sysfs.h b/include/linux/sysfs.h
index c6f0f0d0e17e..aa02c328dff5 100644
--- a/include/linux/sysfs.h
+++ b/include/linux/sysfs.h
@@ -512,7 +512,7 @@ static inline void sysfs_notify_dirent(struct kernfs_node *kn)
 }
 
 static inline struct kernfs_node *sysfs_get_dirent(struct kernfs_node *parent,
-						   const unsigned char *name)
+						   const char *name)
 {
 	return kernfs_find_and_get(parent, name);
 }
diff --git a/include/net/sock.h b/include/net/sock.h
index f5ea148853e2..a05805a7a683 100644
--- a/include/net/sock.h
+++ b/include/net/sock.h
@@ -1705,8 +1705,9 @@ static inline int skb_add_data_nocache(struct sock *sk, struct sk_buff *skb,
 {
 	int err, offset = skb->len;
 
-	err = skb_do_copy_data_nocache(sk, skb, from, skb_put(skb, copy),
-				       copy, offset);
+	err = skb_do_copy_data_nocache(sk, skb, from,
+				       (char *)skb_put(skb, copy), copy,
+				       offset);
 	if (err)
 		__skb_trim(skb, offset);
 
diff --git a/kernel/fork.c b/kernel/fork.c
index 2e391c754ae7..545657a6fc44 100644
--- a/kernel/fork.c
+++ b/kernel/fork.c
@@ -891,8 +891,8 @@ void mm_release(struct task_struct *tsk, struct mm_struct *mm)
 			 * not set up a proper pointer then tough luck.
 			 */
 			put_user(0, tsk->clear_child_tid);
-			sys_futex(tsk->clear_child_tid, FUTEX_WAKE,
-					1, NULL, NULL, 0);
+			sys_futex((u32 __user *)tsk->clear_child_tid,
+					FUTEX_WAKE, 1, NULL, NULL, 0);
 		}
 		tsk->clear_child_tid = NULL;
 	}
-- 
