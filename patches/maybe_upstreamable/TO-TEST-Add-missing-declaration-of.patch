From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
Date: Wed, 27 May 2015 11:35:49 +0800
Subject: [PATCH] {MAYBE UPS} (TO TEST) Add missing declaration of
 __ticket_lock/unlock_... in !SMP && PARAVIRT config

---
 arch/x86/include/asm/spinlock.h | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/arch/x86/include/asm/spinlock.h b/arch/x86/include/asm/spinlock.h
index be0a05913b91..34c0b7b289d4 100644
--- a/arch/x86/include/asm/spinlock.h
+++ b/arch/x86/include/asm/spinlock.h
@@ -53,6 +53,12 @@ static inline void __ticket_enter_slowpath(arch_spinlock_t *lock)
 	set_bit(0, (volatile unsigned long *)&lock->tickets.head);
 }
 
+# if !defined(CONFIG_SMP)
+/* XXX: add void definitions to functions which are not defined anywhere */
+extern void __ticket_lock_spinning(arch_spinlock_t *lock, __ticket_t ticket);
+extern void __ticket_unlock_kick(struct arch_spinlock *lock, __ticket_t ticket);
+# endif
+
 #else  /* !CONFIG_PARAVIRT_SPINLOCKS */
 static __always_inline void __ticket_lock_spinning(arch_spinlock_t *lock,
 							__ticket_t ticket)
-- 
