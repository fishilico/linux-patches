From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Nicolas Iooss <nicolas.iooss_linux@m4x.org>
Date: Sun, 19 Aug 2018 14:41:32 +0200
Subject: [PATCH] {MAYBE UPS} fs/cifs: do not use maybe-uninitialized
 resp_buftype

As rsp is NULL, this is not so important.
---
 fs/cifs/smb2pdu.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/fs/cifs/smb2pdu.c b/fs/cifs/smb2pdu.c
index 29b699d532ef..d7cc65e41759 100644
--- a/fs/cifs/smb2pdu.c
+++ b/fs/cifs/smb2pdu.c
@@ -2525,7 +2525,8 @@ SMB2_open(const unsigned int xid, struct cifs_open_parms *oparms, __le16 *path,
 		*oplock = rsp->OplockLevel;
 creat_exit:
 	SMB2_open_free(&rqst);
-	free_rsp_buf(resp_buftype, rsp);
+	if (rsp)
+		free_rsp_buf(resp_buftype, rsp);
 	return rc;
 }
 
@@ -2838,7 +2839,8 @@ SMB2_close_flags(const unsigned int xid, struct cifs_tcon *tcon,
 
 close_exit:
 	SMB2_close_free(&rqst);
-	free_rsp_buf(resp_buftype, rsp);
+	if (rsp)
+		free_rsp_buf(resp_buftype, rsp);
 	return rc;
 }
 
@@ -3025,7 +3027,8 @@ query_info(const unsigned int xid, struct cifs_tcon *tcon,
 
 qinf_exit:
 	SMB2_query_info_free(&rqst);
-	free_rsp_buf(resp_buftype, rsp);
+	if (rsp)
+		free_rsp_buf(resp_buftype, rsp);
 	return rc;
 }
 
-- 
